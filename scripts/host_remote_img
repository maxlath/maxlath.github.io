#!/usr/bin/env coffee
require 'colors'
cb = require('copy-paste').copy
request = require 'request'
fs = require 'fs'
[ url, name... ] = process.argv.slice(2)
name = name.join('-')
_ = require '../lib/utils'
fs = require 'fs'


unless url? then throw new Error('missing url')
unless name? then throw new Error('missing name')

getImgUrl = (name)->
  unless /\./.test name then name = name + '.jpg'
  "/assets/img/#{name}"

newUrl = getImgUrl name
path = ".#{newUrl}"

request.get url
.pipe fs.createWriteStream(path)

cb newUrl
console.log 'file copied, url added to clipboard'.green, newUrl
